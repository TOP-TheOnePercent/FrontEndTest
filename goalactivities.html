<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Team Goal Activities</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
     <style type="text/css">
   .form_container {
	  max-width: 750px;
	  margin: 30px auto;
	  padding: 20px 25px;
	  border: 1px solid #ddd;
	  border-radius: 10px;
	  box-shadow: 0 1px 1px rgb(0 0 0 / 20%);
	  background:rgba(255,255,255,0.97);
  }
  .form-header{margin-bottom: 20px;}
  .form-header h2 {
    margin: 0;
    font-size: 26px;
    font-weight: 600;
    color: green;
    border-bottom: 1px dashed;
    padding-bottom: 8px;
}
  #readmode .form-header h5{color: green;}
  label.form-label {
	display: block;
	margin-bottom: 5px;
}
.activitiesItem{margin:0;padding:0;list-style:none;}
li.addItem_row {
display: flex;
margin-bottom: 10px;
}
.add_row_btns {
    display: flex;
    padding-left: 10px;
    justify-content: right;
    align-items: center;
}
.add_row_btns {
    margin: 0;
    width: 65px;
}
.addItem{display:none}
.addItem svg {  margin-left: 10px;}
.removeItem svg {  fill: red;}
label.form-label { font-weight: 600;}
.form_group {
    margin: 25px 0;
}
body{background:#ddd url(team.jpeg) no-repeat left center / cover; }

.activitiesItem li:first-child .removeItem{display:none;}
.activitiesItem li:last-child .addItem{display:inline-block;}
p{margin:0;}
#readmode label.form-label {
    display: block;
    width: 100%;
    margin-bottom: 0;
	color: blue;
}
span#wokeup { color: #000;}
#readmode .input-group.mb-3 {
    margin-bottom: 10px !important;
}
#readmode .form_group {
    border: 1px dashed #ddd;
    border-radius: 5px;
    padding: 16px;
    background: #fff;
}

#readmode li.addItem_row svg {
    margin-top: 5px;
    margin-right: 6px;
	fill: green;
}

#readmode svg {  margin-right: 6px;fill: green;}
#readmode p {
    padding-left: 28px;
}
#readmode h6 {
    color: #ff5400;
    font-weight: 700;
}
</style>

     </style>
  </head>
  <body>

    <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="form_container">
                <div class="form-header"><h2>My Goal Activities</h2></div>
                <div class="form_body">
                  <form id='dailyStatusUpdate'>
                      
                      <div class="input-group mb-3">
                        <span class="input-group-text">Woke Up At</span>
                        <input type="datetime-local" class="form-control" name="WokeUpAt" required>
                      </div>
						
                      <div class="mb-3">
                        <label class="form-label">Exercise Activities</label>
						<ul class="activitiesItem">
							<li class="addItem_row">							
								<input type="text" class="form-control" placeholder="Entry a Activitie" name="ExerciseActivities[]" required>
								<span class="add_row_btns">
									<a class="removeItem" href="#" title="Remove Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>
									</a>
									<a class="addItem" href="#" title="Add Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
								</span>
							</li>
						</ul>	
                      </div>
						<div class="form_group">
							<h5>Goal Activities</h5>
							<h6>Mid Term</h6>
							<div class="input-group mb-3">
								<span class="input-group-text">Topic</span>
								<input type="text" class="form-control" name="midtermTopic[]" required>
						   </div>
						   <div class="input-group mb-3">
								<span class="input-group-text">Action</span>
								<textarea rows="3"  class="form-control" name="midtermAction[]" required></textarea>
						   </div>
							<h6>Long Term</h6>
							<div class="input-group mb-3">
								<span class="input-group-text">Topic</span>
								<input type="text" class="form-control" name="longtermTopic[]" required>
						   </div>
						   <div class="input-group mb-3">
								<span class="input-group-text">Action</span>
								<textarea  rows="3" class="form-control" name="longtermAction[]" required></textarea>
						   </div>
					   </div>
					    <div class="mb-3">
                        <label class="form-label">Positive</label>
						<ul class="activitiesItem">
							<li class="addItem_row">							
								<input type="text" class="form-control" placeholder="Entry a Activitie" name="Positive[]" required>
								<span class="add_row_btns">
									<a class="removeItem" href="#" title="Remove Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>
									</a>
									<a class="addItem" href="#" title="Add Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
								</span>
							</li>
						</ul>	
                      </div>
					  
					   <div class="mb-3">
                        <label class="form-label">Gratitude</label>
						<ul class="activitiesItem">
							<li class="addItem_row">							
								<input type="text" class="form-control" placeholder="Entry a Activitie" name="Gratitude[]" required>
								<span class="add_row_btns">
									<a class="removeItem" href="#" title="Remove Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>
									</a>
									<a class="addItem" href="#" title="Add Row"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg></a>
								</span>
							</li>
						</ul>	
                      </div>
					  <div class="mb-3" style="  text-align: center;">
					   <input id='statusUpdateBtn' type="button" value="Submit" class="btn btn-primary"></input>
					   </div>
                  </form>
				  
				  <div id='readmode' style="display:none">
                      
                      <div class="input-group mb-3">
                        <label class="form-label"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-alarm" viewBox="0 0 16 16">
  <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5z"/><path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1h-3zm1.038 3.018a6.093 6.093 0 0 1 .924 0 6 6 0 1 1-.924 0zM0 3.5c0 .753.333 1.429.86 1.887A8.035 8.035 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5zM13.5 1c-.753 0-1.429.333-1.887.86a8.035 8.035 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1z"/></svg> Woke Up At: <span id="wokeup"></span></label>                       
                      </div>						
                      <div class="mb-3">
                        <label class="form-label">Exercise Activities:</label>
						<ul class="activitiesItem" id="exerciseactivities"></ul>	
                      </div>
						<div class="form_group">
							<h5>Goal Activities</h5>
							<div id="goalActivities">
								<div id="goalActivityTemplate" style="display:none">
									<div>
										<h6 id="goalTerm">Term</h6>
										<div class="input-group mb-3">								
											<label class="form-label"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trophy-fill" viewBox="0 0 16 16"><path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935z"/></svg> Topic: </label> 
											<p id="goalTopic"></p>
									   </div>
									   <div class="input-group mb-3">
											<label class="form-label">Action: </label> 
											<p id="goalAction"></p>
									   </div>
								   </div>
							   </div>							
						   </div>
					   </div>
					    <div class="mb-3">
                        <label class="form-label">Positive: </label>
						<ul class="activitiesItem" id="positiveitem"></ul>	
                      </div>
					  
					   <div class="mb-3">
                        <label class="form-label">Gratitude: </label>
						<ul class="activitiesItem" id="gratitudeitem"></ul>	
                      </div>					 
                  </div>
				  
				  
                </div>
            </div>
            

          </div>
        </div>    
  
    </div>   
   
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	<script>
	
	const modes = {
            View: 1,
            Edit: 2,
            Create: 3
         }
		 
	function ViewStatusUpdates(myStatusUpdates){
			
			// Apply the values for View Mode.
			$('#wokeup').text(myStatusUpdates.WokeUpAt);
			$.each(myStatusUpdates.ExerciseActivities, function(key, item){
				$("#exerciseactivities").append('<li class="addItem_row"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-universal-access" viewBox="0 0 16 16">  <path d="M9.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM6 5.5l-4.535-.442A.531.531 0 0 1 1.531 4H14.47a.531.531 0 0 1 .066 1.058L10 5.5V9l.452 6.42a.535.535 0 0 1-1.053.174L8.243 9.97c-.064-.252-.422-.252-.486 0l-1.156 5.624a.535.535 0 0 1-1.053-.174L6 9V5.5Z"/></svg> '+item+'</li>');
			});
			
			$.each(myStatusUpdates.Positive, function(key, item){
					$("#positiveitem").append('<li class="addItem_row"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-activity" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"/></svg> '+item+'</li>');
			});
			
			$.each(myStatusUpdates.Gratitude, function(key, item){
					$("#gratitudeitem").append('<li class="addItem_row"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/></svg> '+item+'</li>');
			});
			
			$.each(myStatusUpdates.GoalActivities, function(key, item){
			
				var goalActivityTemplate = $('#goalActivityTemplate');
				goalActivityTemplate.find('#goalTerm').html(item.Term);
				goalActivityTemplate.find('#goalTopic').html(item.Topic);
				goalActivityTemplate.find('#goalAction').html(item.Action);
				
				$('#goalActivities').append(goalActivityTemplate.html());
			});
			
	}
	function LoadStatusUpdates(myStatusUpdates){
		console.log('LoadStatusUpdates', myStatusUpdates);
		$('[name=WokeUpAt]').val(myStatusUpdates.WokeUpAt);
	}
	function GetStatusUpdate(url, mode){
		fetch(url).then(response => response.json())
		  .then(json => {
			  if(mode == modes.View) ViewStatusUpdates(json.record);
			  else LoadStatusUpdates(json.record);
		  });
	}

	$(document).ready(function() {
	
	/* pass your API here to get the daily status update. */
	$('#dailyStatusUpdate').hide();
			$('#readmode').show();	
		const url = 'https://api.jsonbin.io/v3/b/639c3b1e01a72b59f2320e98';
		GetStatusUpdate(url, modes.View);	
			
		$('.addItem').click(function(){
			var ul = $(this).closest('.activitiesItem');
			ul.find('li:first').clone(true).appendTo(ul);
			$(this).closest('.activitiesItem').find('li:last-child input').val('');
			
			return false;
		});
		
		$('.removeItem').click(function(){
			$(this).closest('.addItem_row').remove();
			return false;
		});
	
	/************/
	
		$("#statusUpdateBtn").on('click', function(){	
			
			//const templateUrl = 'https://api.jsonbin.io/v3/b/63a097ee15ab31599e20494e';
			const templateUrl = 'https://api.jsonbin.io/v3/b/639c3b1e01a72b59f2320e98';
			GetStatusUpdate(templateUrl, modes.Edit);
			/*
			$('#dailyStatusUpdate').hide();
			$('#readmode').show();	
			var values = $(this).serializeArray();
			e.preventDefault();
			
			$.each(values, function(key, item) {
			if(item.name == "WokeUpAt"){	$('#wokeup').text(item.value); }
			});
			//Upload json to Server and Load the Data.
			const url = 'https://api.jsonbin.io/v3/b/639c3b1e01a72b59f2320e98';
			GetStatusUpdate(url);
			*/
		});
		
	});
</script>
  </body>
</html>